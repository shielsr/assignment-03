# Process

- Brainstormed initial ideas for assignment
- Wrote user stories and entities
- Created models.py file with some basic classes
- Created sandbox.ipynb to start experimenting with my classes
- Fleshed out the Promoter, Gig and Sale classes
- Wrote functions to switch the sale on at a certain date and off when tickets run out
- Wrote functions for the buyer, and for counting how many tickets are left
- Created a list to store who buys tickets and the amount of tickets
- Set up Flask. Created the app.py file and template html files
- Got the placeholder 'gig' working, along with the ability to 'purchase' tickets
- Added basic login session functionality
- Allowed users to add new gigs, with loop on homepage showing newly added gigs.
- Every new gig & sale event has its own /buy page, with the event ID added to the URL
- To demonstrate understanding of Javascript, I added a carousel to the mobile homepage, with code from https://medium.com/@pietrogon/how-to-create-a-carousel-with-html-css-and-javascript-step-by-step-guide-f46c267692d2
- Included a Bootstrap navbar for desktop and mobile menus. Followed the documentation here: https://getbootstrap.com/docs/4.0/components/navbar/
- Again to demonstrate understanding of Javascript, I worked with Rob Cleary to fetch the 'tickets_left' amount and update that on the /buy page when the user clicks the 'Refresh tickets' button. 
- Added logic to the homepage's 'Add a new gig' card so that the user must first log in before they can add a gig.
- Developed the login section further, adding a dict with promoter details, which can be edited on a 'My account' page (I followed Yoni's lesson here)
- Used Javascript to do error checking on form inputs for both the /buy and /add pages
- Used flex and grid in CSS to finalise the layout
- Added favicon and logo (generated by AI)


# My design decisions
## User stories

### Roles:
- Event promoter who wants to sell tickets
- Customer who wants to buy tickets

### User stories:

Event promoter user stories:

#### 1. Create new gig events
[MUST] As a promoter, I want to post upcoming gigs with details on artist, time, date, and venue, so fans will know what gigs are coming up.

#### 2. Create ticket sale events
[MUST] As a promoter, I want to create a ticket sale event with start date, start time, amount of tickets, so I can sell tickets and make money.

#### 3. Countdown to sale start
[MUST] As a promoter, I don't want to sell tickets before the sale start date, so fans can be ready to buy at a specific time.

#### 4. Measure ticket amount
[MUST] As a promoter, I want to stop selling tickets when they run out, so I don't sell too many tickets.

Customer user stories:

#### 1. Countdown to sale start
[MUST] As a customer, I want to see when the ticket sale begins so I can be ready at a specific date and time.

#### 2. Purchase tickets
[MUST] As a customer, I want to buy tickets so I can attend gigs.

#### 3. See ticket price
[MUST] As a customer, I want to see the final ticket price, so I know how much I will be paying.

### Future work:
I did not cater for the following user stories in this version of the website, as they are beyond the scope of the assignment.

#### 1. Record details of sale
[SHOULD] As a promoter, I want to know who has bought how many tickets, so I can send the correct amount of tickets to the right person.  [NOTE: I created a dict that captures this, but I currently don't surface it anywhere]

#### 2. Artist search
[SHOULD] As a customer, I want to search for artists I like, to see when and where their next gigs are.

#### 3. 'My events' list
[SHOULD] As a promoter, I want to see a list of the events I've created, so I can keep track of my events.

#### 4. Edit my events
[SHOULD] As a promoter, I want to be able to edit events I've created, so I can fix typos or adjust event details.

#### 5. Customer accounts
[SHOULD] As a customer, I want to log in and see what tickets I've bought, so I can keep track of my purchases.

#### 
[SHOULD] 

#### 
[MUST] 



## Content
The site will include:
- Homepage showing available gigs
- 'Login' page to allow users to start sessions
- 'Add an event' page with a form for promoters to fill out
- 'Buy' page with a form for purchasing tickets
- 'Purchased' page to show that the order has been placed
- 'My account' page where logged-in users can edit their details


## Prioritised tasks:
1. Write classes and functions in Python to facilitate the user stories
2. Use Flask to set up templates, routes, etc
3. Use a combination of CSS and Bootstrap for the style and layout of the site
4. Use Jinja and Javascript for the functionality of the site
5. Deploy the app to Render.com



## Wireframes

I created basic wireframes in Figma for mobile and desktop, with the mobile layout responsively catering for tablets too.

![Mobile wireframe](docs/wireframes/wireframe-mobile.jpg)  ![Desktop wireframe](docs/wireframes/wireframe-desktop.jpg)

## User journey happy path
The happy path involves the user reaching the 'Create' form, selecting their desired flavours, generating the mockup of the pastilles and then placing an order.

### Step 01: User navigates to the 'Create' form
![Step one](docs/wireframes/step01.jpg)

### Step 02: User enters their desired flavours
![Step two](docs/wireframes/step02.jpg)

### Step 03: Mockup generated
![Step three](docs/wireframes/step03.jpg)

### Step 04: 'Order' form
![Step four](docs/wireframes/step04.jpg)



# My development process
## How I went about it

The following is a step-by-step account of how I did the project, which closely corresponds with the series of commits I made to the repo.

- Brainstormed initial ideas for the assignment
- Wrote user stories and entities
- Created models.py file with some basic classes
- Created sandbox.ipynb to start experimenting with my classes
- Fleshed out the `Promoter`, `Gig` and `Sale` classes
- Wrote functions to switch the sale on at a certain date and off when tickets run out
- Wrote functions for the buyer (`buy`), and for counting how many tickets are left (`countdown`)
- Created a list to store who buys tickets and the amount of tickets (Note: This works, but I ultimately didn't surface it in the HTML as it was beyond the scope of the assignment)
- Set up Flask. Created the app.py file and template html files
- Got 2 placeholders gigs working, along with the ability to purchase tickets
- Used Bootstrap for 3-column grid layout of the gig cards
- Added basic login session functionality
- Allowed users to add new gigs, with loop on homepage showing newly added gigs
- Every new `gig` & `sale` event has its own /buy page, with the event ID added to the URL
- To demonstrate understanding of Javascript, I added a carousel to the mobile homepage, adapting code from https://medium.com/@pietrogon/how-to-create-a-carousel-with-html-css-and-javascript-step-by-step-guide-f46c267692d2
- Included a Bootstrap navbar for desktop and mobile menus. Followed the documentation here: https://getbootstrap.com/docs/4.0/components/navbar/
- Again to demonstrate understanding of Javascript, I worked with Rob Cleary to fetch the `tickets_left` amount and update that on the /buy page when the user clicks the 'Refresh tickets' button. 
- Added logic to the homepage's 'Add a new gig' card so that the user must first log in before they can add a gig
- Developed the login section further, adding a dict with promoter details, which can be edited on a 'My account' page (I followed Yoni's lesson here)
- Used Javascript to do error checking on form inputs for both the /buy and /add pages
- Used flex and grid in CSS to finalise the layout
- Added favicon and logo (generated by AI)
- Did a final tidy-up of my code and completed the documentation.


# Challenges faced

Some challenges I faced include:




## Incorporating Javascript
I found that Python/Flask/Jinja could do a lot of things that I would have previously done in JS, so I had to come up with different ways of incorporating JS. I used it in 3 main places:
1. The mobile carousel on the homepage
2. The 'Refresh tickets' button on the /buy page
3. Form validaiton on the /buy and /add pages

The 'Refresh tickets' button warrants more explanation. I worked with Rob Cleary on using Javascript to fetch the number of tickets left from the server. 
The concept behind it was: During a real-world ticket sale, multiple users will buy tickets at the same time. So, it's possible that tickets will run out before a user can complete their order. The 'Refresh tickets' button reflects this scenario. You can test it out by opening the site in 2 browsers, buying tickets in one, then pressing 'Refresh tickets' in the other browser to see the 'tickets left' number decreasing.

## Styling with Bootstrap and CSS
I hadn't used Bootstrap before so there was a learning curve here. I used  Bootstrap for some of the core components (e.g. the navbar, cards and the homepage card grid). I used CSS for the broader layout, using `grid` and `flex`. I also used CSS media queries to show/hide the carousel on mobile, and to add hover effects to the gig cards on desktop. 


## Passing data between Python, Flask, Jinja and Javascript.
The biggest challenge for me was figuring out how to pass data between Python, Flask, Jinja and Javascript. In particular, it took me a while to figure out how to pass the `gig_id` around, as that ID was essential to tying the /add, /buy and /purchased pages together. The `tickets_left` variable was also a challenge, as I needed to use it in Javascript too (see 'Incorporating Javascript' above).

## Spelling out the flavours
Probably the biggest challenge was figuring out the `mapFlavours()` function. My goal was to have the 12 chosen pastilles listed in an array as a series of strings, e.g. `[red, red, green, green, green, ...etc.]`. I went back to the lectures on forEach loops and pushing into arrays, and eventually did a `for` loop inside a `forEach` loop.

## Bugfixes
In the Development process section above I documented some of the bugs I encountered along the way. Nothing too challenging, but each one required effort to figure out.


# Examples of DOM manipulation
## Live counter on 'Create' form
The form for choosing the flavours has a live counter at the top. I used  `.innerText` to change the total count, depending on what numbers the user enters in the form.

## Swapping classes on live counter
In the live counter, if the total goes over or under 12, I use `.classList.add` and `.classList.remove` to change the CSS class on the counter, turning it red or green.

## Adding the 'Warning' box
When the page loads, I use `.createElement` and `.appendChild` to add a warning box in the 'Order' section. It would have been easier to hard code the box in the HTML, but I wanted to demonstrate that I could add/remove elements this way.

![Warning box prior to generating pastilles](docs/instructions/image09.jpg)

## Removing the 'Warning' box
When the user generates their pastilles, I use `.removeChild` to get rid of the warning box in the 'Order' section.  

## Printing the list of pastilles on the order form
I take the array of pastilles generated by the 'Create' form and print them into the 'Order' section using `.innerText`.

![Printing the array of pastilles at the top of the order form](docs/instructions/image10.jpg)

## Revealing the 'Order' form 
When the user generates their pastilles, the 'Order' form is revealed using `.style.display = "block"`
